<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.8
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-ironSource.atom+SDK+for+Ruby">ironSource.atom SDK for Ruby</h1>

<p><a
href="https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square">{License</a>]
<a
href="https://img.shields.io/badge/docs-latest-blue.svg">{Docs</a>/]
<a
href="https://travis-ci.org/ironSource/atom-ruby.svg?branch=master">{Build
status</a>]
<a
href="https://coveralls.io/repos/github/ironSource/atom-ruby/badge.svg?branch=master">{Coverage
Status</a>]
<a href="https://badge.fury.io/rb/iron_source_atom.svg">{Gem
Version</a>]</p>

<p>atom-ruby is the official <a
href="http://www.ironsrc.com/data-flow-management">ironSource.atom</a> SDK
for Ruby.</p>
<ul><li>
<p><a href="https://atom.ironsrc.com/#/signup">Signup</a></p>
</li><li>
<p><a href="https://ironsource.github.io/atom-ruby/">Documentation</a></p>
</li><li>
<p><a href="#installation">Installation</a></p>
</li><li>
<p><a href="#usage">Usage</a></p>
</li><li>
<p><a href="#change-log">Change Log</a></p>
</li><li>
<p><a href="#example">Example</a></p>
</li></ul>

<h2 id="label-Installation">Installation</h2>

<h3 id="label-Installation+using+gem">Installation using gem</h3>

<pre class="code ruby"><code class="ruby">$ gem install iron_source_atom</code></pre>

<h2 id="label-Usage">Usage</h2>

<p>You may use the SDK in two different ways:</p>
<ol><li>
<p>High level “Tracker” - contains in-memory storage and tracks events based
on certain parameters.</p>
</li><li>
<p>Low level - contains 2 methods: putEvent() and putEvents() to send 1 event
or a batch respectively.</p>
</li></ol>

<h3 id="label-High+Level+SDK+-+%22Tracker%22">High Level SDK - “Tracker”</h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;iron_source_atom&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">TestTracker</span>

<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">test_multitread</span>
    <span class="ruby-identifier">url</span> = <span class="ruby-string">&quot;http://track.atom-data.io/&quot;</span>
    <span class="ruby-identifier">atom_tracker</span> = <span class="ruby-constant">IronSourceAtom</span><span class="ruby-operator">::</span><span class="ruby-constant">Tracker</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">atom_tracker</span>.<span class="ruby-identifier">auth</span> = <span class="ruby-string">&quot;YOUR_PRE_SHARED_AUTH_KEY&quot;</span>
    <span class="ruby-identifier">atom_tracker</span>.<span class="ruby-identifier">track</span>(<span class="ruby-string">&quot;stream&quot;</span>, <span class="ruby-string">&quot;data&quot;</span>)
    <span class="ruby-identifier">atom_tracker</span>.<span class="ruby-identifier">flush</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The Tracker process:</p>

<p>You can use track() method in order to track the events to an Atom
Stream.
The tracker accumulates events and flushes them when it meets one
of the following conditions:</p>
<ol><li>
<p>Flush Interval is reached (default: 10 seconds).</p>
</li><li>
<p>Bulk Length is reached (default: 50 events).</p>
</li><li>
<p>Maximum Bulk byte size is reached (default: 128KB).</p>
</li></ol>

<p>In case of failure the tracker will preform an exponential backoff with
jitter.
The tracker stores events in memory.</p>

<h3 id="label-Low+Level+%28Basic%29+SDK">Low Level (Basic) SDK</h3>

<p>The Low Level SDK has 2 methods:<br>
- putEvent - Sends a single event to
Atom<br>
- putEvents - Sends a bulk (batch) of events to Atom.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;json&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;iron_source_atom&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">TestExample</span>

  <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">do_test_job</span>
    <span class="ruby-identifier">url</span> = <span class="ruby-string">&quot;http://track.atom-data.io/&quot;</span>
    <span class="ruby-identifier">auth</span> = <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">atom</span> = <span class="ruby-constant">IronSourceAtom</span><span class="ruby-operator">::</span><span class="ruby-constant">Atom</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">auth</span>)

    <span class="ruby-identifier">data_string</span> = {
        <span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>,
        <span class="ruby-identifier">message</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;hello_from_ruby&quot;</span>
    }.<span class="ruby-identifier">to_json</span>

    <span class="ruby-identifier">response</span> = <span class="ruby-identifier">atom</span>.<span class="ruby-identifier">put_event</span>(<span class="ruby-string">&quot;ibtest&quot;</span>, <span class="ruby-identifier">data_string</span>)
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Response #{response.code} #{response.message}:
          #{response.body}&quot;</span>

    <span class="ruby-identifier">data1</span> = {
        <span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">11</span>,
        <span class="ruby-identifier">message</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;first_array_data&quot;</span>
    }
    <span class="ruby-identifier">data2</span> = {
        <span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">12</span>,
        <span class="ruby-identifier">message</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;second_array_data&quot;</span>
    }
    <span class="ruby-identifier">data3</span> = {
        <span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">13</span>,
        <span class="ruby-identifier">message</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;third_array_data&quot;</span>
    }

    <span class="ruby-identifier">array_data_string</span> = [<span class="ruby-identifier">data1</span>, <span class="ruby-identifier">data2</span>, <span class="ruby-identifier">data3</span>].<span class="ruby-identifier">to_json</span>

    <span class="ruby-identifier">response</span> = <span class="ruby-identifier">atom</span>.<span class="ruby-identifier">put_events</span>(<span class="ruby-string">&quot;ibtest&quot;</span>, <span class="ruby-identifier">array_data_string</span>)
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Response #{response.code} #{response.message}:
          #{response.body}&quot;</span>

  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">do_test_job</span>

<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Change+Log">Change Log</h2>

<h3 id="label-v1.5.2">v1.5.2</h3>
<ul><li>
<p>Fixed a bug with too many running threads in celluloid</p>
</li><li>
<p>Added limits to Bulk Length, Size and Flush Interval</p>
</li></ul>

<h3 id="label-v1.5.1">v1.5.1</h3>
<ul><li>
<p>Rewrote all async ops to work with celluloid</p>
</li><li>
<p>Refactored Tracker</p>
</li><li>
<p>Refactored Atom base class</p>
</li><li>
<p>Refactored Http Client class</p>
</li><li>
<p>Improved Docs</p>
</li><li>
<p>Added a Dockerfile and docker-compose to run the SDK in a container</p>
</li></ul>

<h3 id="label-v1.1.0">v1.1.0</h3>
<ul><li>
<p>Added Tracker</p>
</li></ul>

<h3 id="label-v1.0.0">v1.0.0</h3>
<ul><li>
<p>Basic features - putEvent &amp; putEvents</p>
</li></ul>

<h2 id="label-Example">Example</h2>
<ul><li>
<p>You can use our <a href="http://example">example</a> for sending data to
Atom.</p>
</li><li>
<p>To run the SDK in a Docker container:</p>
<ul><li>
<p>Get Docker and docker-compose</p>
</li><li>
<p>git clone <a
href="https://github.com/ironSource/atom-ruby.git">github.com/ironSource/atom-ruby.git</a></p>
</li><li>
<p>Setup your stream and auth at the docker-compose (passed as env vars)</p>
</li><li>
<p>run: <code>docker-compose up</code></p>
</li></ul>
</li></ul>

<h2 id="label-License">License</h2>

<p><a href="http://LICENSE">MIT</a></p>
</div></div>

      <div id="footer">
  Generated on Mon Feb 20 12:41:35 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.0.0).
</div>

    </div>
  </body>
</html>